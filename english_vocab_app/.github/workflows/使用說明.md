# iOS IPA 構建使用說明

## 📋 前置準備

1. **確保代碼已推送到 GitHub**
   - 如果還沒有，先初始化 Git 並推送：
   ```bash
   cd C:\AI\english_vocab_app
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin <你的GitHub倉庫URL>
   git push -u origin main
   ```

2. **確認 workflow 文件存在**
   - 文件路徑：`.github/workflows/ios-build-simple.yml`
   - 如果沒有，需要先創建並提交

## 🚀 使用方法

### 方法 1：自動觸發（推薦）

當您推送代碼到 `main` 或 `master` 分支時，workflow 會自動運行。

```bash
# 修改代碼後
git add .
git commit -m "Update app"
git push origin main
```

### 方法 2：手動觸發

1. 打開 GitHub 倉庫頁面
2. 點擊頂部菜單的 **"Actions"** 標籤
3. 在左側選擇 **"Build iOS IPA (Simple - No Code Signing)"**
4. 點擊右側的 **"Run workflow"** 按鈕
5. 選擇分支（通常是 `main`）
6. 點擊綠色的 **"Run workflow"** 按鈕

### 方法 3：通過 Pull Request 觸發

創建 Pull Request 到 `main` 或 `master` 分支時也會自動觸發。

## 📦 查看構建結果

1. **進入 Actions 頁面**
   - 在 GitHub 倉庫頁面，點擊 **"Actions"** 標籤

2. **查看構建狀態**
   - 綠色 ✓ = 構建成功
   - 紅色 ✗ = 構建失敗
   - 黃色 ⏳ = 正在構建中

3. **點擊構建任務查看詳情**
   - 可以看到每個步驟的執行情況
   - 如果有錯誤，會顯示在對應步驟中

## 📥 下載 IPA 文件

構建成功後：

1. **在構建詳情頁面**
   - 滾動到頁面底部
   - 找到 **"Artifacts"** 區域

2. **下載 IPA**
   - 點擊 **"ios-ipa-unsigned"** 鏈接
   - 會下載一個 ZIP 文件
   - 解壓後即可得到 `.ipa` 文件

3. **文件位置**
   - 下載的 ZIP 文件包含：`*.ipa` 文件
   - 文件名類似：`english_vocab_app.ipa`

## ⚠️ 重要說明

### 未簽名 IPA 的限制

- ❌ **無法直接安裝到 iPhone/iPad**
- ❌ **無法上傳到 App Store**
- ✅ **可以用於測試構建流程**
- ✅ **可以用於檢查構建是否成功**

### 如何安裝未簽名的 IPA？

如果需要安裝到設備，有幾種方法：

1. **使用 Xcode**
   - 在 Xcode 中打開項目
   - 連接設備
   - 選擇設備並運行

2. **使用第三方工具**（需要證書）
   - AltStore
   - Sideloadly
   - 3uTools

3. **使用完整版本 workflow**
   - 配置證書後使用 `ios-build.yml`
   - 可以構建已簽名的 IPA

## 🔧 常見問題

### Q1: 構建失敗，提示 "Flutter not found"
**解決方案**：
- 檢查 workflow 文件中的 Flutter 版本
- 確保使用的是穩定版本

### Q2: 構建失敗，提示 "CocoaPods error"
**解決方案**：
- 檢查 `ios/Podfile` 是否存在
- 嘗試在本地運行 `pod install` 檢查錯誤

### Q3: 構建成功但找不到 IPA 文件
**解決方案**：
- 檢查 Artifacts 區域（在構建詳情頁面底部）
- 確認構建確實成功（綠色標記）
- 等待幾分鐘，Artifacts 可能需要時間生成

### Q4: 如何查看構建日誌？
**解決方案**：
- 點擊構建任務
- 展開每個步驟查看詳細日誌
- 如果有錯誤，會在對應步驟中顯示

### Q5: 構建時間太長？
**解決方案**：
- 首次構建會較慢（需要下載依賴）
- 後續構建會使用緩存，速度會更快
- 通常需要 10-20 分鐘

## 📝 構建流程說明

workflow 會執行以下步驟：

1. ✅ **Checkout repository** - 下載代碼
2. ✅ **Setup Flutter** - 安裝 Flutter SDK
3. ✅ **Install dependencies** - 運行 `flutter pub get`
4. ✅ **Verify Flutter setup** - 檢查 Flutter 環境
5. ✅ **Setup Xcode** - 配置 Xcode
6. ✅ **Install CocoaPods** - 安裝 iOS 依賴
7. ✅ **Build IPA** - 構建 IPA 文件（無簽名）
8. ✅ **Upload artifact** - 上傳構建產物

## 🎯 下一步

### 如果需要發布到 App Store：

1. **配置證書和配置文件**
   - 參考 `README_IOS_BUILD.md` 中的說明
   - 設置 GitHub Secrets

2. **使用完整版本 workflow**
   - 使用 `ios-build.yml` 而不是 `ios-build-simple.yml`
   - 可以構建已簽名的 IPA

3. **更新 ExportOptions.plist**
   - 設置正確的 Team ID 和 Bundle ID

## 💡 提示

- 構建通常需要 10-20 分鐘，請耐心等待
- 首次構建會較慢，後續會使用緩存
- 如果構建失敗，檢查日誌中的錯誤信息
- IPA 文件會在 Artifacts 中保留 30 天



